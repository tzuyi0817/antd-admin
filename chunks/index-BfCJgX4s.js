import{j as t,M as F,W as u,P as S,l as q}from"./ant-design-B1v1DFa0.js";import{j,b as l}from"./core-BlX8Nbu1.js";import{d as z,p as y,b as k,g as C}from"../entries/index.CqrNK3Ce.js";import{O as v,B as g,a1 as D,aK as R}from"./antd-COVAbBu_.js";import"./vender-D3PkjLbL.js";function M(e){return y("/home/list",e)}function B(e){return y("/home/create",e)}function H(e){return k("/home/edit",e)}function E(e){return z(`/home/delete/${e}`)}function b(e){return`$${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}function O(e){return[{dataIndex:"index",title:e("common.index"),valueType:"indexBorder",width:60,align:"center"},{title:e("common.itemNumber"),dataIndex:"itemNumber",disable:!0,ellipsis:!0,width:120,align:"center",fieldProps:{placeholder:e("common.placeholder.itemNumber")}},{disable:!0,title:e("common.productName"),dataIndex:"productName",width:120,ellipsis:!0,align:"center",fieldProps:{placeholder:e("common.placeholder.productName")}},{title:e("common.unit"),dataIndex:"unit",width:80,search:!1,align:"center"},{title:e("common.quantity"),dataIndex:"quantity",valueType:"digit",width:100,search:!1,align:"center"},{title:e("common.unitPrice"),dataIndex:"unitPrice",width:170,search:!1,align:"center",renderText:b},{title:e("common.totalPrice"),dataIndex:"totalPrice",width:170,search:!1,align:"center",renderText:b},{title:e("common.creationDate"),dataIndex:"createdAt",valueType:"dateRange",hideInTable:!0,search:{transform:([a,c])=>({startTime:a,endTime:c})}}]}function $({title:e,open:a,onCloseChange:c,detailData:o,refreshTable:f}){const{t:n}=j(),[m]=v.useForm();async function d(r){const p=C();return o.id?(await H({...o,...r}),p.success(n("common.updateSuccess"))):(await B(r),p.success(n("common.addSuccess"))),f?.(),!0}return l.useEffect(()=>{a&&m.setFieldsValue(o)},[a]),t.jsxs(F,{title:e,open:a,onOpenChange:r=>{r===!1&&(m.resetFields(),c())},labelCol:{span:4},wrapperCol:{span:18},layout:"horizontal",form:m,autoFocusFirstInput:!0,onFinish:d,children:[t.jsx(u,{allowClear:!0,rules:[{required:!0}],width:"md",name:"itemNumber",label:n("common.itemNumber")}),t.jsx(u,{allowClear:!0,rules:[{required:!0}],width:"md",name:"productName",label:n("common.productName")}),t.jsx(u,{allowClear:!0,rules:[{required:!0}],width:"md",name:"unit",label:n("common.unit")}),t.jsx(u,{allowClear:!0,rules:[{required:!0}],width:"md",name:"quantity",label:n("common.quantity")}),t.jsx(u,{allowClear:!0,rules:[{required:!0}],width:"md",name:"unitPrice",label:n("common.unitPrice")})]})}function J(){const{t:e}=j(),a=l.useRef(null),[c,o]=l.useState(!1),[f,n]=l.useState(""),[m,d]=l.useState({}),r=l.useMemo(()=>[...O(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",align:"center",render:(i,s,h,x)=>t.jsxs("div",{className:"flex justify-center",children:[t.jsx(g,{type:"link",size:"small",onClick:()=>{n(e("common.update")),d({...s}),o(!0)},children:e("common.edit")},"editable"),t.jsx(D,{title:e("common.confirmDelete"),onConfirm:()=>p(s.id,x),cancelText:e("common.cancel"),okText:e("common.confirm"),children:t.jsx(g,{type:"link",size:"small",children:e("common.delete")})},"delete")]})}],[e]);async function p(i,s){await E(i),C().success(e("common.deleteSuccess")),await s?.reload?.()}function T(){o(!1),d({})}function I(){a.current?.reload()}return t.jsxs("div",{className:"box-border p-4",children:[t.jsx(S,{cardBordered:!0,rowKey:"id",dateFormatter:"string",columns:r,actionRef:a,request:async i=>{const{current:s,pageSize:h,...x}=i,N=s??1,P=h??10,{resultMap:w}=await M({page:N,pageSize:P,...x});return{...w,data:w.list}},scroll:{x:"max-content"},toolBarRender:()=>[t.jsx(g,{icon:t.jsx(q,{}),type:"primary",onClick:()=>{o(!0),n(e("common.add"))},children:e("common.add")},"add")],loading:{indicator:t.jsx(R,{spin:!0})},search:{labelWidth:"auto",defaultCollapsed:!1},pagination:{placement:["bottomEnd"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:i=>e("common.pagination",{total:i})}}),t.jsx($,{title:f,open:c,onCloseChange:T,detailData:m,refreshTable:I})]})}export{J as default};
